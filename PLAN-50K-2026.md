# PLAN 50K EUR - Squad Planner 2026

> Objectif : 50 000 EUR de benefice brut d'ici le 31 decembre 2026
> Statut : En cours | Debut : 16 fevrier 2026 | Fin : 31 decembre 2026
> Derniere MAJ : 16 fevrier 2026

---

## TABLE DES MATIERES

1. [Contexte strategique](#contexte-strategique)
2. [Etat des lieux de l'app](#etat-des-lieux-de-lapp-16-fevrier-2026)
3. [Architecture des revenus](#architecture-des-revenus)
4. [Phase 1 : Fondations monetaires](#phase-1--fondations-monetaires-16-fev---15-mars)
5. [Phase 2 : Moteur de croissance](#phase-2--moteur-de-croissance-16-mars---30-avril)
6. [Phase 3 : Acceleration + App Stores](#phase-3--acceleration--app-stores-mai---juillet)
7. [Phase 4 : Scale & Optimisation](#phase-4--scale--optimisation-aout---octobre)
8. [Phase 5 : Sprint final](#phase-5--sprint-final-novembre---decembre)
9. [Publication App Stores](#publication-app-stores---guide-complet)
10. [Legal & Compliance](#legal--compliance)
11. [Budget & Couts](#budget--couts)
12. [Dettes techniques bloquantes](#dettes-techniques-bloquantes)
13. [Equipe & Recrutement](#equipe--recrutement)
14. [Plans de contingence](#plans-de-contingence)
15. [Calendrier synthetique](#calendrier-synthetique)
16. [KPIs hebdomadaires](#kpis-a-suivre-chaque-semaine)
17. [Outils & Stack](#outils--stack-necessaires)
18. [Risques et mitigations](#risques-et-mitigations)
19. [Prochaine action immediate](#prochaine-action-immediate)

---

## CONTEXTE STRATEGIQUE

### Pourquoi c'est faisable

| Facteur | Donnee |
|---------|--------|
| Joueurs en France | 40,2 millions (10,9M de 16-30 ans) |
| Depense moyenne/joueur/an | 119 EUR |
| Guilded (concurrent #1) | **Ferme dec. 2025** - vide sur le marche |
| Marche eSport Management | $169M, +12,4%/an |
| Revenue Discord bots | $34M/an de revenus developpeurs |
| Conversion freemium SaaS | 2-5% (top: 10%) |
| Marge micro-SaaS | 80-95% |
| Utilisateurs smartphone gaming | 2,5 milliards monde, 25M en France |
| Commission App Store (< 1M USD) | 15% (Small Business Program Apple + Google) |

---

## ETAT DES LIEUX DE L'APP (16 fevrier 2026)

### Ce qui est DEJA construit

#### Infrastructure & Architecture
- **Framework** : React Router v7 (mode Framework, SSR, Vercel preset)
- **Frontend** : React 19, TypeScript 5.9, Tailwind CSS v4, Framer Motion
- **Backend** : Supabase (PostgreSQL, Auth, Storage, Edge Functions, Realtime)
- **Deploiement** : Vercel (SSR + prerendering 6 pages publiques)
- **State** : Zustand 5 + TanStack Query 5
- **CI/CD** : GitHub Actions (6 jobs paralleles : build, 4 shards unit tests, bundle check, Lighthouse desktop/mobile, E2E)

#### Pages & Routes (17 routes)
| Route | Type | Description |
|-------|------|-------------|
| `/` | Public, prerendu | Landing page (15 sections de conversion) |
| `/auth` | Public, prerendu | Connexion/inscription |
| `/premium` | Public, prerendu | Page Premium |
| `/help` | Public, prerendu | Documentation aide |
| `/legal` | Public, prerendu | Mentions legales |
| `/maintenance` | Public, prerendu | Page de maintenance |
| `/join/:code` | Public | Rejoindre une squad via code |
| `/onboarding` | Public | Onboarding 7 etapes |
| `/home` | Protege | Dashboard principal |
| `/squads` | Protege | Liste des squads |
| `/squad/:id` | Protege | Detail d'une squad |
| `/sessions` | Protege | Liste des sessions |
| `/session/:id` | Protege | Detail d'une session |
| `/messages` | Protege | Messagerie directe |
| `/party` | Protege | Chat vocal (LiveKit) |
| `/discover` | Protege | Decouvrir joueurs/squads |
| `/profile` | Protege | Profil utilisateur |
| `/u/:username` | Protege | Profil public |
| `/settings` | Protege | Parametres |
| `/call-history` | Protege | Historique d'appels |

#### Features implementees
- **Squads** : Creation, invitation par code, roles (leader/co_leader/member), max 50 membres premium
- **Sessions** : Planification, RSVP (present/absent/peut-etre), auto-confirmation a 70%, historique
- **Messagerie** : DM temps reel, reactions, reponses, edition, suppression, transfert, messages epingles, recherche, indicateur de frappe
- **Voice Chat** : Party audio via LiveKit, qualite reseau, reconnexion auto, messages vocaux avec waveform
- **Gamification** : XP (0-10000+), 10 niveaux, 8 types de badges, streaks journaliers, challenges (daily/weekly/seasonal), leaderboards
- **IA** : Coach IA, aide a la decision, planification, rappels RSVP, resumes de session (6 edge functions)
- **Premium/Stripe** : Checkout, webhook, portail client, annulation, trial 7 jours
- **PWA** : Installable, service worker (cache statique/dynamique/images), raccourcis, mode standalone
- **Notifications** : Web Push (VAPID) + natif (FCM via Capacitor), preferences, centre de notifications
- **i18n** : Francais (primaire) + Anglais
- **Analytics** : PostHog custom (3KB, fetch-based), tracking events complet (squads, sessions, RSVP, premium, onboarding)
- **SEO** : OG tags, JSON-LD (WebApplication, Organization, BreadcrumbList, FAQPage), sitemap.xml, robots.txt, canonical URLs
- **Monitoring** : Error tracker custom (3KB, remplace Sentry 408KB), Web Vitals (LCP, FCP, CLS, TTFB, INP)
- **Securite** : CSP, HSTS, CORS, X-Frame-Options: DENY, RLS Supabase, tokens JWT LiveKit
- **Mobile natif** : Capacitor configure (fr.squadplanner.app), push natif, haptics, local notifications
- **Video** : Remotion configure (hero video, compositions, scenes)
- **Email** : Welcome email via Resend (1 seul template)

#### Composants : 76 | Hooks : 72+ | Tests : 632 unit + 221+ E2E | Migrations DB : 25

#### Base de donnees (tables principales)
`profiles`, `squads`, `squad_members`, `sessions`, `session_rsvps`, `messages`, `challenges`, `user_challenges`, `xp_levels`, `xp_transactions`, `seasonal_badges`, `subscriptions`, `push_tokens`, `error_reports`, `web_vitals`

### Ce qui MANQUE (lacunes critiques)

| Lacune | Impact sur 50K | Priorite | Statut |
|--------|---------------|----------|--------|
| Seulement 2 tiers (free/premium a 4,99) | CRITIQUE - ARPU trop bas | S1 | ðŸŸ¢ DONE |
| Free tier trop genereux (2 squads, 30j, illimite) | CRITIQUE - pas de friction | S1 | ðŸŸ¢ DONE |
| Pas de systeme de parrainage | ELEVE - pas de croissance virale | S3 | ðŸŸ¢ DONE |
| Pas de bot Discord | ELEVE - canal #1 manquant | S4-6 | |
| Non publie sur App Store / Google Play | ELEVE - 50% du marche gaming est mobile | S11-16 | |
| Pas de pages SEO programmatiques | MOYEN - trafic organique manquant | S8 | |
| 1 seul email (welcome), pas de lifecycle | MOYEN - retention faible | S25-28 | |
| Pas de features B2B/Club | MOYEN - revenue stream manquant | S15-16 | |
| Pas de social sharing in-app | MOYEN - viralite limitee | S7 | ðŸŸ¢ DONE |
| Pas de sessions recurrentes | MOYEN - valeur Squad Leader non justifiee | S9 | |
| Pas de blog/content marketing | FAIBLE - SEO long-terme | S19-20 | |
| Sitemap statique (6 URLs) | FAIBLE - technique | S8 | |
| `is_user_premium()` binaire dans DB | BLOQUANT - empeche 4 tiers | S1 | ðŸŸ¢ DONE |
| `stripe-webhook` hardcode 'premium' | BLOQUANT - empeche 4 tiers | S1 | ðŸŸ¢ DONE |

---

## ARCHITECTURE DES REVENUS

### Objectif : 50 000 EUR cumules sur 10,5 mois

| Source de revenu | Cible fin 2026 | % du total |
|------------------|----------------|------------|
| Abonnements Premium B2C (web) | 14 000 EUR | 28% |
| Abonnements Squad Leader B2C (web) | 12 000 EUR | 24% |
| Bot Discord Premium | 5 000 EUR | 10% |
| Abonnements via App Stores (net apres commission 15%) | 5 500 EUR | 11% |
| Plans annuels (cash upfront supplementaire) | 6 000 EUR | 12% |
| Offres B2B Club (5-15 orgs) | 5 500 EUR | 11% |
| Black Friday + promotions | 2 000 EUR | 4% |
| **TOTAL** | **50 000 EUR** | **100%** |

### Nouvelle grille tarifaire

| Tier | Web mensuel | Web annuel | Mobile mensuel* | Cible |
|------|------------|------------|-----------------|-------|
| **Free** | 0 EUR | 0 EUR | 0 EUR | Joueurs casuals, decouverte |
| **Premium** | 6,99 EUR | 59,88 EUR (4,99/mois) | 6,99 EUR | Joueurs reguliers |
| **Squad Leader** | 14,99 EUR | 143,88 EUR (11,99/mois) | 14,99 EUR | Capitaines de squad |
| **Club** (B2B) | 39,99 EUR | 383,88 EUR (31,99/mois) | Web uniquement | Structures esport |

*\*Prix identiques sur mobile, commission 15% absorbee (Small Business Program Apple/Google < 1M USD/an)*

#### Free (0 EUR) â€” Reduction par rapport a l'existant
- **1 squad** (reduit de 2 a 1)
- **3 sessions/semaine** (reduit d'illimite a 3)
- **Historique 7 jours** (reduit de 30 a 7)
- Chat basique (pas de voice msg, pas de GIF, pas de polls)
- Stats basiques
- Publicites discretes (banniere non-intrusive)

#### Premium (6,99 EUR/mois)
- 5 squads
- Sessions illimitees
- Historique 90 jours
- Chat complet (GIF, voice msg, polls, reactions)
- Stats avancees + tendances
- IA Coach basique
- Badge Premium violet
- Zero pub

#### Squad Leader (14,99 EUR/mois) â€” NOUVEAU
- Squads illimites
- Historique illimite
- Audio HD Party (LiveKit haute qualite)
- IA Coach avance (tactiques, compositions d'equipe)
- **Dashboard analytics equipe** (qui carry, meilleurs horaires, heatmap, tendances)
- Roles avances (IGL, Coach, Shotcaller, Analyste)
- Export calendrier (Google Calendar, iCal)
- **Sessions auto-recurrentes** ("Tous les mardis et jeudis a 21h")
- Priorite matchmaking sur Discover
- Badge Squad Leader dore

#### Club (39,99 EUR/mois) â€” NOUVEAU B2B
- Tout Squad Leader inclus
- **Dashboard multi-squads** (gerer 10+ equipes depuis une vue)
- Statistiques cross-squad (comparer les equipes)
- Branding personnalise (logo club sur squads)
- API webhook (integration outils externes : Discord, Notion, Google Sheets)
- Onboarding assiste (appel de 30 min)
- Support prioritaire 24h
- Facturation entreprise (factures PDF)
- Export CSV/PDF des statistiques

### Modele financier detaille

**Hypotheses :**
- Churn mensuel : 8% (standard SaaS gaming)
- Conversion free â†’ paid : 3-5% (progressif)
- Ratio Premium/Leader/Club : 60% / 30% / 10%
- Croissance users : organique + bot Discord + App Stores
- Budget marketing : 30% du MRR reinvesti

| Mois | Users gratuits | Premium (6,99) | Leader (14,99) | Club (39,99) | Bot Discord | MRR total | Cumule |
|------|---------------|----------------|----------------|--------------|-------------|-----------|--------|
| Mars | 600 | 15 | 5 | 0 | 0 | 180 EUR | 180 |
| Avril | 1 200 | 35 | 12 | 1 | 0 | 465 EUR | 645 |
| Mai | 2 000 | 65 | 25 | 2 | 100 | 1 055 EUR | 1 700 |
| Juin | 3 500 | 110 | 42 | 4 | 250 | 1 969 EUR | 3 669 |
| Juil | 5 000 | 165 | 65 | 6 | 400 | 2 928 EUR | 6 597 |
| Aout | 7 000 | 220 | 90 | 9 | 550 | 3 907 EUR | 10 504 |
| Sept | 9 500 | 290 | 120 | 12 | 700 | 5 061 EUR | 15 565 |
| Oct | 12 000 | 370 | 155 | 15 | 850 | 6 367 EUR | 21 932 |
| Nov | 15 000 | 480 | 200 | 19 | 1 000 | 8 163 EUR | 30 095 |
| Dec | 18 000 | 600 | 250 | 24 | 1 150 | 10 158 EUR | 40 253 |

**Revenus supplementaires :**
- Plans annuels (20% des users payants souscrivent annuel) : **~6 000 EUR** de cash upfront
- App Store subscriptions (a partir de juin, net apres 15% commission) : **~3 500 EUR**
- B2B one-shots (fees onboarding Club) : **~500 EUR**

**TOTAL PROJETE : ~50 250 EUR**

---

## PHASE 1 : FONDATIONS MONETAIRES (16 fev - 15 mars)

> Objectif : Restructurer le pricing, reduire le Free, lancer le referral, preparer le partage social
> Budget phase : 0 EUR
> Revenue attendu fin phase : 180 EUR MRR
> **Statut : EN COURS â€” 4/5 sous-phases terminÃ©es**

### 1.1 Restructuration du pricing [Semaine 1-2] â€” ðŸŸ¢ DONE

**Dettes techniques a corriger EN PREMIER :**

1. **Migration DB** : Ajouter les nouveaux tiers a l'enum
```sql
-- Fichier : supabase/migrations/YYYYMMDD_pricing_tiers.sql
ALTER TYPE subscription_tier ADD VALUE 'squad_leader';
ALTER TYPE subscription_tier ADD VALUE 'club';

-- Rendre squad_id nullable dans subscriptions (actuellement NOT NULL)
ALTER TABLE subscriptions ALTER COLUMN squad_id DROP NOT NULL;

-- Nouvelle fonction pour remplacer is_user_premium() binaire
CREATE OR REPLACE FUNCTION get_user_tier(p_user_id UUID)
RETURNS TEXT AS $$
DECLARE v_tier TEXT;
BEGIN
  SELECT subscription_tier INTO v_tier FROM profiles WHERE id = p_user_id;
  IF v_tier IS NULL THEN RETURN 'free'; END IF;
  -- Verifier expiration
  IF (SELECT subscription_expires_at FROM profiles WHERE id = p_user_id) < now() THEN
    RETURN 'free';
  END IF;
  RETURN v_tier;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;

-- Rate limiting sessions Free
CREATE OR REPLACE FUNCTION check_session_creation_limit()
RETURNS TRIGGER AS $$
DECLARE
  v_tier TEXT;
  v_count INTEGER;
BEGIN
  v_tier := get_user_tier(NEW.created_by);
  IF v_tier = 'free' THEN
    SELECT COUNT(*) INTO v_count FROM sessions
    WHERE created_by = NEW.created_by
    AND created_at > now() - interval '7 days';
    IF v_count >= 3 THEN
      RAISE EXCEPTION 'Limite de 3 sessions/semaine atteinte (tier Free)';
    END IF;
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER enforce_session_limit
  BEFORE INSERT ON sessions
  FOR EACH ROW EXECUTE FUNCTION check_session_creation_limit();
```

**Fichiers a modifier :**

| Fichier | Modification |
|---------|-------------|
| `src/hooks/usePremium.ts` | Refactorer : `hasPremium` â†’ `tier: SubscriptionTier`, nouvelles constantes LIMITS par tier, `canAccessFeature(feature, tier)` |
| `src/hooks/useSubscription.ts` | Ajouter 6 plans (SL monthly/yearly, Club monthly/yearly), nouveaux env vars |
| `src/pages/premium/PremiumData.tsx` | 4 tiers avec features detaillees |
| `src/pages/premium/PremiumPricing.tsx` | Layout 4 colonnes responsive + toggle mensuel/annuel |
| `supabase/functions/stripe-webhook/index.ts` | Mapper `price_id` â†’ tier dynamiquement (supprimer le hardcode `'premium'` ligne 103) |
| `supabase/functions/create-checkout/index.ts` | Passer le `tier` en metadata pour le webhook |
| `src/components/landing/PricingSection.tsx` | 4 colonnes au lieu de 2, toggle mensuel/annuel |
| `src/components/PremiumGate.tsx` | Verifier tier au lieu de boolean |

**Actions Stripe Dashboard :**
- [x] Creer produit "Squad Leader" avec 2 prix (14,99/mois, 143,88/an)
- [x] Creer produit "Club" avec 2 prix (39,99/mois, 383,88/an)
- [x] Mettre a jour produit "Premium" (4,99 â†’ 6,99/mois, 47,88 â†’ 59,88/an)
- [ ] Activer les codes promo Stripe
- [ ] Configurer le portail client pour upgrade/downgrade

**Nouvelles variables d'environnement :**
```bash
VITE_STRIPE_PRICE_PREMIUM_MONTHLY=price_xxx
VITE_STRIPE_PRICE_PREMIUM_YEARLY=price_xxx
VITE_STRIPE_PRICE_SL_MONTHLY=price_xxx
VITE_STRIPE_PRICE_SL_YEARLY=price_xxx
VITE_STRIPE_PRICE_CLUB_MONTHLY=price_xxx
VITE_STRIPE_PRICE_CLUB_YEARLY=price_xxx
```

### 1.2 Reduction des limites Free [Semaine 1] â€” ðŸŸ¢ DONE

| Feature | Avant (Free) | Apres (Free) | Premium | Squad Leader |
|---------|-------------|-------------|---------|-------------|
| Squads | 2 | **1** | 5 | Illimite |
| Historique | 30 jours | **7 jours** | 90 jours | Illimite |
| Sessions/semaine | Illimite | **3** | Illimite | Illimite |
| GIF/Voice msg | Oui | **Non** | Oui | Oui |
| Polls | Oui | **Non** | Oui | Oui |

**Fichiers a modifier :**
| Fichier | Modification |
|---------|-------------|
| `src/hooks/usePremium.ts` | `FREE_SQUAD_LIMIT = 1`, `FREE_HISTORY_DAYS = 7`, `FREE_SESSIONS_PER_WEEK = 3` |
| `src/components/GifPicker.tsx` | Ajouter gate Premium |
| `src/components/VoiceRecorder.tsx` | Ajouter gate Premium |
| `src/components/CreatePollModal.tsx` | Ajouter gate Premium |
| `supabase/migrations/20260206170001_premium_backend_security.sql` | Mettre a jour `can_create_squad()` : 2 â†’ 1 pour free |

### 1.3 Page Premium redesignee [Semaine 2] â€” ðŸŸ¢ DONE

**Nouvelles fonctionnalites UI :**
- Tableau comparatif 4 colonnes (Free / Premium / Squad Leader / Club)
- Toggle mensuel/annuel avec badge "Economise 28%"
- Badge "Plus populaire" sur Squad Leader
- Temoignages (placeholder au debut, vrais temoignages des que possible)
- Garantie 30 jours rembourse mise en avant
- Banniere urgence : "Offre de lancement -30% jusqu'au 31 mars" avec countdown

### 1.4 Systeme de parrainage [Semaine 3] â€” ðŸŸ¢ DONE

**Nouveaux fichiers :**
| Fichier | Description |
|---------|-------------|
| `supabase/migrations/YYYYMMDD_referrals.sql` | Table referrals + ajout referral_code a profiles |
| `src/hooks/useReferral.ts` | Hook Zustand pour gestion des referrals |
| `src/routes/referral.tsx` | Page tableau de bord referral |
| `supabase/functions/process-referral/index.ts` | Edge function traitement des rewards |

**Migration DB :**
```sql
-- Table referrals
CREATE TABLE referrals (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  referrer_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  referred_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  referral_code TEXT NOT NULL,
  status TEXT DEFAULT 'pending', -- pending, signed_up, converted
  reward_claimed BOOLEAN DEFAULT false,
  referrer_reward_type TEXT, -- 'xp', 'premium_days', 'badge'
  created_at TIMESTAMPTZ DEFAULT now(),
  UNIQUE(referrer_id, referred_id)
);

-- Ajout du code referral au profil
ALTER TABLE profiles ADD COLUMN referral_code TEXT UNIQUE;
ALTER TABLE profiles ADD COLUMN referred_by UUID REFERENCES profiles(id);

-- Index pour lookup rapide
CREATE INDEX idx_referrals_referrer ON referrals(referrer_id);
CREATE INDEX idx_referrals_code ON referrals(referral_code);
CREATE INDEX idx_profiles_referral_code ON profiles(referral_code);
```

**Mecanique de parrainage :**
- Auto-generation du code a l'inscription : `USERNAME-SP26`
- UTM tracking : `?ref=CODE` sur toutes les URLs partagees
- Parrain recoit : +500 XP + 7 jours Premium gratuit par filleul inscrit
- Filleul recoit : 7 jours Premium gratuit
- Si le filleul passe Premium : parrain recoit 1 mois gratuit
- Paliers :
  - 3 filleuls : Badge "Recruteur"
  - 10 filleuls : 1 mois Squad Leader gratuit
  - 25 filleuls : Squad Leader a vie

**Route a ajouter dans `src/routes.ts` :**
```typescript
route('referral', './routes/referral.tsx') // dans le layout protege
```

### 1.5 Partage social [Semaine 4] â€” ðŸŸ¢ DONE

**Nouveaux fichiers :**
| Fichier | Description |
|---------|-------------|
| `src/components/ShareButtons.tsx` | Boutons WhatsApp, Twitter/X, copier lien, SMS |
| `src/routes/session-share.tsx` | Page publique de preview session (`/s/:id`) |
| `supabase/functions/og-image/index.ts` | Generation OG image dynamique |

**Route publique a ajouter :**
```typescript
route('s/:id', './routes/session-share.tsx') // route publique
```

---

## PHASE 2 : MOTEUR DE CROISSANCE (16 mars - 30 avril)

> Objectif : Lancer le bot Discord, campagne Guilded, pages SEO, viralite
> Budget phase : ~5 EUR/mois (Railway)
> Revenue attendu fin phase : 465 EUR MRR, 645 EUR cumule

### 2.1 Bot Discord "Squad Planner" [Semaine 5-7] â€” MUST-HAVE

**C'est le levier #1. Discord = 200M+ d'utilisateurs actifs.**

**Architecture :**
```
discord-bot/
  src/
    index.ts              -- Entry point, discord.js v14
    commands/
      session.ts          -- /session create, list, join
      rsvp.ts             -- /rsvp [id] [oui/non/peut-etre]
      squad.ts            -- /squad stats, info
      lfg.ts              -- /lfg [jeu] [rang]
      link.ts             -- /link [username] - lier compte SP
      help.ts             -- /help
    premium-commands/
      recurring.ts        -- /session recurring (premium)
      analytics.ts        -- /analytics (premium)
      coach.ts            -- /coach (premium)
      leaderboard.ts      -- /leaderboard (premium)
      remind.ts           -- /remind (premium)
    events/
      ready.ts
      interactionCreate.ts
      guildCreate.ts      -- Tracking nouveaux serveurs
      guildDelete.ts
    lib/
      supabase.ts         -- Client Supabase partage
      stripe.ts           -- Checkout pour premium bot
      permissions.ts      -- Verification tier serveur
    deploy-commands.ts    -- Registration des slash commands
  package.json
  Dockerfile
  .env
```

**Dependencies :**
```json
{
  "discord.js": "^14.x",
  "@supabase/supabase-js": "^2.x",
  "stripe": "^14.x"
}
```

**Monetisation du bot :**
- **Gratuit** : `/session create`, `/session list`, `/rsvp`, `/squad stats`, `/lfg`
- **Premium** (2,99 EUR/mois par serveur) : `/session recurring`, `/analytics`, `/coach`, `/leaderboard`, `/remind`, `/export`
- CTA dans chaque reponse : lien vers l'app web

**Nouvelle table DB :**
```sql
CREATE TABLE discord_server_subscriptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  discord_guild_id TEXT NOT NULL UNIQUE,
  guild_name TEXT,
  admin_user_id UUID REFERENCES profiles(id),
  stripe_subscription_id TEXT,
  status TEXT DEFAULT 'free', -- free, premium, cancelled
  current_period_end TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT now()
);
```

**Distribution (gratuit) :**
- top.gg (listing principal)
- discord.bots.gg
- discordbotlist.com
- SEO : "bot planning gaming discord", "discord session scheduler"

**Hosting :** Railway (free tier au debut, ~5 EUR/mois a l'echelle)

### 2.2 Campagne "Guilded est mort, Squad Planner est la" [Semaine 7-8] â€” MUST-HAVE

**Nouvelles pages a creer :**

| Route | Fichier | Description |
|-------|---------|-------------|
| `/alternative/guilded` | `src/routes/alternative.guilded.tsx` | Landing page SEO "Guilded a ferme" |
| `/alternative/gamerlink` | `src/routes/alternative.gamerlink.tsx` | Comparaison GamerLink |
| `/alternative/discord-events` | `src/routes/alternative.discord-events.tsx` | Vs Discord Events |
| `/vs/guilded-vs-squad-planner` | `src/routes/vs.guilded-vs-squad-planner.tsx` | Comparaison detaillee |

**Ajouter a `react-router.config.ts` pour prerendering :**
```typescript
prerender: [
  '/', '/auth', '/legal', '/help', '/premium', '/maintenance',
  '/alternative/guilded', '/alternative/gamerlink', '/alternative/discord-events',
  '/vs/guilded-vs-squad-planner'
]
```

**Actions marketing (0 EUR) :**
- Reddit : r/Guilded, r/esports, r/discordapp, r/gaming
- Repondre aux threads "best Guilded alternative 2026"
- SEO ciblant : "guilded alternative", "guilded replacement", "guilded migration"
- CTA : 30 jours Premium gratuit pour ex-users Guilded (code promo Stripe `GUILDED30`)

### 2.3 Pages SEO programmatiques [Semaine 8-9] â€” MUST-HAVE

**Nouveaux fichiers :**

| Fichier | Description |
|---------|-------------|
| `src/routes/games.$game.tsx` | Page dynamique par jeu (SSR) |
| `src/routes/lfg.$game.tsx` | Page LFG par jeu (SSR) |
| `src/data/games.ts` | Metadata des jeux (nom, slug, icone, description, nombre de joueurs) |
| `src/routes/sitemap[.]xml.tsx` | Sitemap dynamique (remplace le statique) |

**Pages a generer :**
```
/games/valorant         - "Planifier des sessions Valorant"
/games/league-of-legends
/games/fortnite
/games/cs2
/games/overwatch-2
/games/apex-legends
/games/rocket-league
/games/call-of-duty
/lfg/valorant           - "Chercher des joueurs Valorant"
/lfg/league-of-legends
/lfg/fortnite
(etc.)
```

**Contenu de chaque page :**
- H1 optimise SEO : "Planifier des sessions [Jeu] avec Squad Planner"
- Description du jeu + nombre de joueurs actifs
- Sessions en cours (dynamique depuis DB)
- Squads actives pour ce jeu
- CTA : "Cree ta premiere session [Jeu]"
- JSON-LD : `VideoGame` schema + `WebApplication`

**Top 10 mots-cles cibles :**
1. "planifier session gaming" (FR)
2. "chercher joueurs valorant" (FR)
3. "guilded alternative" (EN/FR)
4. "gaming schedule app" (EN)
5. "lfg app" (EN)
6. "trouver des joueurs" (FR)
7. "organiser tournoi gaming" (FR)
8. "squad planner gaming" (EN/FR)
9. "discord scheduling bot" (EN)
10. "gaming team management" (EN)

### 2.4 Viralite produit native [Semaine 9-10] â€” NICE-TO-HAVE

**1. Invite a l'onboarding**
- Modifier `src/routes/onboarding.tsx` : ajouter etape "Invite 2 amis"
- Partage WhatsApp, SMS, copier lien avec code referral
- Badge "Fondateur" si 2 invitations envoyees

**2. Widget embarquable pour streamers**
- Nouveau fichier : `src/routes/widget.$squadId.tsx`
- Route publique : `/widget/:squadId`
- Affiche prochaines sessions + bouton "Rejoindre"
- Code embed : `<iframe src="squadplanner.fr/widget/ID" width="300" height="400">`
- Minimaliste, personnalisable (theme sombre/clair)

**3. Notification FOMO**
- "Ta squad joue MAINTENANT sans toi !" (push quand session demarre)
- Deja partiellement implemente via `send-reminders` edge function

### 2.5 Sitemap dynamique [Semaine 8] â€” MUST-HAVE

**Remplacer `public/sitemap.xml` statique par une route SSR :**

Nouveau fichier : `src/routes/sitemap[.]xml.tsx`
- Genere dynamiquement toutes les URLs :
  - Pages statiques (/, /auth, /premium, /help, /legal)
  - Pages alternatives (/alternative/*)
  - Pages jeux (/games/*)
  - Pages LFG (/lfg/*)
  - Blog posts (/blog/*)
- Priorite et frequence de mise a jour par type

---

## PHASE 3 : ACCELERATION + APP STORES (mai - juillet)

> Objectif : Publier sur les stores, lancer le B2B, ambassadeurs, features haute valeur
> Budget phase : ~200 EUR (comptes dev) + ~30 EUR/mois infra
> Revenue attendu fin juillet : 2 928 EUR MRR, 6 597 EUR cumule

### 3.1 Publication App Stores [Semaine 11-16] â€” MUST-HAVE

*Voir section dediee "PUBLICATION APP STORES" plus bas pour le detail complet.*

**Timeline resumee :**
- S11 (5-11 mai) : Comptes developpeur Apple + Google
- S12 (12-18 mai) : Assets (screenshots, descriptions, previews)
- S13 (19-25 mai) : Build config, signing, deep linking
- S14 (26 mai - 1 juin) : In-App Purchase implementation
- S15 (2-8 juin) : TestFlight beta iOS + Internal Testing Android
- S16 (9-15 juin) : Soumission stores + corrections eventuelles

### 3.2 Outreach B2B Esport [Mai-Juin] â€” MUST-HAVE

**Cible : Structures esport francaises + clubs universitaires**

**Liste de prospection :**
- Tier 1 (structures pro) : Karmine Corp, Team Vitality, Team BDS, LDLC OL, Solary, GameWard
- Tier 2 (semi-pro) : GamersOrigin, Gentle Mates, Aegis, Misfits
- Tier 3 (universitaire) : 30+ clubs esport en France (UniSport, CFVU Gaming, etc.)
- Tier 4 (associations) : Associations gaming locales, LAN organizers

**Offre Club B2B :**
- 39,99 EUR/mois (ou 383,88 EUR/an)
- **30 jours d'essai gratuit**
- Onboarding assiste (1 appel de 30 min)
- Dashboard multi-equipes
- Branding personnalise

**Process de vente :**
1. Email froid personnalise au manager/coach (template + variables)
2. Demo Loom video de 5 minutes
3. Appel de 15 minutes si interesse
4. Trial 30 jours
5. Suivi J+7, J+14, J+25
6. Conversion ou feedback

**Objectif : 5 clubs B2B d'ici juillet = ~200 EUR MRR garanti + credibilite sociale**

### 3.3 Dashboard Squad Leader [Semaine 15-18] â€” MUST-HAVE

**Justifie le tier a 14,99 EUR/mois â€” sans ca, pas de conversion Squad Leader.**

**Nouveaux fichiers :**
| Fichier | Description |
|---------|-------------|
| `src/routes/squad-analytics.tsx` | Page dashboard analytics |
| `src/components/squad-analytics/AttendanceHeatmap.tsx` | Heatmap des horaires de jeu |
| `src/components/squad-analytics/MemberReliabilityChart.tsx` | Classement fiabilite |
| `src/components/squad-analytics/SessionTrends.tsx` | Tendances sessions |
| `src/components/squad-analytics/AIInsightsPanel.tsx` | Suggestions IA |

**Migration DB :**
```sql
-- supabase/migrations/YYYYMMDD_squad_analytics.sql

-- Heatmap : nombre de sessions par jour/heure
CREATE OR REPLACE FUNCTION get_attendance_heatmap(p_squad_id UUID, p_days INTEGER DEFAULT 90)
RETURNS TABLE(day_of_week INTEGER, hour_of_day INTEGER, session_count BIGINT) AS $$
BEGIN
  RETURN QUERY
  SELECT EXTRACT(DOW FROM s.scheduled_at)::INTEGER,
         EXTRACT(HOUR FROM s.scheduled_at)::INTEGER,
         COUNT(*)
  FROM sessions s WHERE s.squad_id = p_squad_id
  AND s.scheduled_at > now() - make_interval(days := p_days)
  GROUP BY 1, 2;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;

-- Tendances de fiabilite par membre
CREATE OR REPLACE FUNCTION get_member_reliability_trends(p_squad_id UUID, p_days INTEGER DEFAULT 90)
RETURNS TABLE(user_id UUID, username TEXT, reliability_score NUMERIC, sessions_attended BIGINT, sessions_total BIGINT) AS $$
BEGIN
  RETURN QUERY
  SELECT sm.user_id, p.username, p.reliability_score,
    COUNT(CASE WHEN sr.response = 'present' THEN 1 END),
    COUNT(sr.id)
  FROM squad_members sm
  JOIN profiles p ON p.id = sm.user_id
  LEFT JOIN session_rsvps sr ON sr.user_id = sm.user_id
  LEFT JOIN sessions s ON s.id = sr.session_id AND s.squad_id = p_squad_id
  WHERE sm.squad_id = p_squad_id
  GROUP BY sm.user_id, p.username, p.reliability_score;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
```

**Route a ajouter (protegee, gate Squad Leader) :**
```typescript
route('squad/:id/analytics', './routes/squad-analytics.tsx')
```

### 3.4 Sessions recurrentes [Semaine 13-14] â€” MUST-HAVE

**Migration DB :**
```sql
-- supabase/migrations/YYYYMMDD_recurring_sessions.sql
CREATE TABLE recurring_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  squad_id UUID REFERENCES squads(id) ON DELETE CASCADE,
  created_by UUID REFERENCES profiles(id),
  title TEXT NOT NULL,
  game TEXT,
  recurrence_rule TEXT NOT NULL, -- format: 'weekly:1,3:21:00' (lundi,mercredi a 21h)
  duration_minutes INTEGER DEFAULT 120,
  min_players INTEGER DEFAULT 2,
  max_players INTEGER DEFAULT 10,
  is_active BOOLEAN DEFAULT true,
  next_occurrence TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT now()
);

CREATE INDEX idx_recurring_sessions_squad ON recurring_sessions(squad_id);
CREATE INDEX idx_recurring_sessions_next ON recurring_sessions(next_occurrence) WHERE is_active = true;
```

**Nouvelle edge function :**
- `supabase/functions/generate-recurring-sessions/index.ts`
- Cron job (pg_cron) : execute chaque jour a 00:00
- Cree les sessions pour les 7 prochains jours
- Copie les RSVP persistants du dernier occurrence

**Nouveaux fichiers frontend :**
- `src/components/RecurringSessionForm.tsx`
- `src/hooks/useRecurringSessions.ts`

### 3.5 Programme Ambassadeur Streamers [Mai-Juin] â€” NICE-TO-HAVE

**Cible : Streamers Twitch/YouTube FR avec 1K-50K viewers**

**Offre ambassadeur :**
- Squad Leader gratuit a vie
- Commission 20% sur chaque abonne referral (via code promo Stripe)
- Badge "Ambassadeur" exclusif
- Mise en avant sur la page Discover

**Process :**
1. Identifier 50 streamers FR gaming (Valorant, LoL, Fortnite, CS2)
2. DM Twitter/Discord personnalise
3. Demo 2 minutes de l'app
4. Creer code promo personnalise (Stripe)
5. Fournir assets marketing (banniere, overlay OBS)

**Nouveaux fichiers :**
- `supabase/migrations/YYYYMMDD_ambassadors.sql` â€” table ambassadors avec tracking commission
- `supabase/functions/ambassador-payout/index.ts` â€” calcul commission mensuelle

**Objectif : 10 ambassadeurs actifs d'ici juin**

### 3.6 Blog & Content Marketing [Semaine 19-20] â€” NICE-TO-HAVE

**Infrastructure blog :**
| Fichier | Description |
|---------|-------------|
| `src/routes/blog._index.tsx` | Index du blog |
| `src/routes/blog.$slug.tsx` | Article individuel |
| `src/data/blog-posts/` | Contenu Markdown |
| `src/components/BlogCard.tsx` | Carte article |

**Premiers articles (SEO) :**
- "Comment organiser un tournoi entre amis en 2026"
- "Guilded a ferme : les 5 meilleures alternatives"
- "5 astuces pour que ta squad ne ghost plus"
- "Comment devenir IGL : guide complet"
- "Les meilleurs horaires pour jouer en ranked"
- Guides par jeu : "Organiser ses sessions Valorant/LoL/Fortnite"

**Reseaux sociaux (continu) :**
- Twitter/X : 1 post/jour (tips, memes, annonces)
- TikTok : 3 videos courtes/semaine
- Instagram : 3 carousels/semaine
- Reddit : participation communautaire (pas de spam)

---

## PHASE 4 : SCALE & OPTIMISATION (aout - octobre)

> Objectif : Doubler la croissance, optimiser conversion, reduire churn, expansion
> Budget phase : ~100-300 EUR/mois marketing (30% du MRR)
> Revenue attendu fin octobre : 6 367 EUR MRR, 21 932 EUR cumule

### 4.1 Optimisation du funnel de conversion [Aout] â€” MUST-HAVE

**A/B tests via PostHog :**
- Page Premium : 3 variantes de layout (comparison table vs feature cards vs interactive)
- Onboarding : moment de l'upsell (etape 5 vs etape 7)
- In-app : bannieres contextuelles ("Upgrade pour voir l'historique complet")
- Paywall soft : afficher les stats avancees floutees avec "Passe Premium"

**Nouveau composant :**
- `src/components/PaywallSoft.tsx` â€” Contenu floute avec overlay "Passe Premium pour debloquer"

**Metriques cibles (PostHog) :**

| Metrique | Objectif |
|----------|----------|
| Conversion free â†’ trial | 8% |
| Conversion trial â†’ paid | 40% |
| Conversion free â†’ paid direct | 4% |
| Churn mensuel | < 6% |
| ARPU | 9 EUR/mois |

### 4.2 Emails lifecycle [Aout-Septembre] â€” MUST-HAVE

**Nouvelle edge function :**
- `supabase/functions/send-lifecycle-email/index.ts` â€” Envoi template-based via Resend
- `supabase/functions/email-scheduler/index.ts` â€” Cron job pour emails planifies

**8 templates email :**

| Trigger | Sujet | Delai |
|---------|-------|-------|
| Inscription | "Bienvenue ! Cree ta premiere squad" | J+1 |
| Inactivite legere | "Invite tes amis et gagne 7 jours Premium" | J+3 |
| Session manquee | "Tu as manque 3 sessions cette semaine" | J+7 |
| Inactivite prolongee | "Ta squad a joue sans toi !" | J+14 |
| Fin trial proche | "Ton essai se termine dans 3 jours" | J-3 trial |
| Fin trial | "Tu as perdu l'acces a X â€” Reviens !" | J+1 post-trial |
| Digest mensuel | Stats : sessions, XP, fiabilite, squad activity | Mensuel |
| Anniversaire | "1 an avec Squad Planner â€” -30% sur annuel" | Anniversaire |

**Migration DB :**
```sql
-- supabase/migrations/YYYYMMDD_email_preferences.sql
CREATE TABLE email_preferences (
  user_id UUID PRIMARY KEY REFERENCES profiles(id) ON DELETE CASCADE,
  marketing BOOLEAN DEFAULT true,
  lifecycle BOOLEAN DEFAULT true,
  digest BOOLEAN DEFAULT true,
  unsubscribe_token TEXT UNIQUE DEFAULT gen_random_uuid()::TEXT,
  updated_at TIMESTAMPTZ DEFAULT now()
);
```

**Route desinscription :**
- `src/routes/unsubscribe.$token.tsx` â€” Page de desinscription email (publique)

### 4.3 Dashboard B2B Club [Septembre] â€” MUST-HAVE

**Pour justifier le tier Club a 39,99 EUR :**

**Migration DB :**
```sql
-- supabase/migrations/YYYYMMDD_club_features.sql
CREATE TABLE clubs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  owner_id UUID REFERENCES profiles(id),
  logo_url TEXT,
  primary_color TEXT DEFAULT '#6366f1',
  subscription_id UUID REFERENCES subscriptions(id),
  created_at TIMESTAMPTZ DEFAULT now()
);

CREATE TABLE club_squads (
  club_id UUID REFERENCES clubs(id) ON DELETE CASCADE,
  squad_id UUID REFERENCES squads(id) ON DELETE CASCADE,
  added_at TIMESTAMPTZ DEFAULT now(),
  PRIMARY KEY (club_id, squad_id)
);
```

**Nouveaux fichiers :**
| Fichier | Description |
|---------|-------------|
| `src/routes/club-dashboard.tsx` | Vue multi-squads |
| `src/components/club/ClubOverview.tsx` | KPIs toutes equipes |
| `src/components/club/CrossSquadAnalytics.tsx` | Comparaison inter-equipes |
| `src/components/club/ExportReport.tsx` | Export CSV/PDF |
| `supabase/functions/club-api/index.ts` | API REST webhooks |
| `supabase/functions/generate-report/index.ts` | Generation rapport PDF |

### 4.4 Expansion internationale [Septembre-Octobre] â€” NICE-TO-HAVE

**Marches prioritaires :**
1. **Belgique, Suisse, Canada FR** â€” Zero effort de traduction
2. **Espagne** â€” 22M joueurs, culture gaming forte
3. **Allemagne** â€” 46M joueurs, #1 Europe

**Nouveaux fichiers :**
- `src/locales/es.ts` â€” Traductions espagnoles
- `src/locales/de.ts` â€” Traductions allemandes

**Actions :**
- Pages SEO dans chaque langue (/es/games/valorant, /de/games/valorant)
- Bot Discord multilingue (detection auto de la langue du serveur)
- Communautes Reddit/Discord locales

### 4.5 LFG Matchmaking ameliore [Octobre] â€” NICE-TO-HAVE

**Ameliorations :**
- Filtres avances : jeu, rang, langue, fuseau horaire, style de jeu
- Score de compatibilite IA (utiliser edge function `ai-coach` existante)
- Systeme de "Like" mutuel (inspiree Tinder pour gamers)

**Nouveau fichier :**
- `src/hooks/useMatchmaking.ts` â€” Algorithme de compatibilite
- Modifier table `matchmaking_requests` existante (migration Phase 6 sociale deja en place)

---

## PHASE 5 : SPRINT FINAL (novembre - decembre)

> Objectif : Maximiser le revenu pour atteindre les 50K EUR
> Budget phase : ~500-1000 EUR marketing (30% MRR eleve)
> Revenue attendu fin decembre : 10 158 EUR MRR, ~50 000 EUR cumule

### 5.1 Black Friday / Cyber Gaming Week [Novembre] â€” MUST-HAVE

**Offre speciale (1 semaine) :**
- -40% sur tous les plans annuels
- Bundle "Squad Pack" : 5 Premium pour le prix de 3
- Code promo : `BFGAMING40`

**Implementation :**
- `src/components/BlackFridayBanner.tsx` â€” Banniere site-wide avec countdown
- Campagne email : 3 emails (tease J-7, lancement J0, derniere chance J+5)
- Push notifications blast
- In-app banner prominent

**Revenue estime : 2 000 EUR supplementaires**

### 5.2 Gaming Wrapped 2026 [Decembre] â€” MUST-HAVE

**Equivalent de Spotify Wrapped pour les gamers â€” viralite massive.**

**Nouveaux fichiers :**
| Fichier | Description |
|---------|-------------|
| `src/routes/wrapped.tsx` | Experience interactive Wrapped |
| `src/components/wrapped/WrappedIntro.tsx` | Introduction animee |
| `src/components/wrapped/WrappedSessions.tsx` | Nombre de sessions, heures jouees |
| `src/components/wrapped/WrappedStreak.tsx` | Meilleur streak |
| `src/components/wrapped/WrappedBadges.tsx` | Badges gagnes |
| `src/components/wrapped/WrappedReliability.tsx` | Score de fiabilite |
| `src/components/wrapped/WrappedShare.tsx` | Image partageable (Remotion) |
| `supabase/functions/generate-wrapped/index.ts` | Agregation stats 2026 |

**Leverage Remotion (deja configure) :**
- `remotion.config.ts` existe deja
- `src/remotion/` contient la structure de base
- Generer une video/image personnalisee par utilisateur
- Partage sur Twitter/Instagram/TikTok

**Donnees affichees :**
- Nombre de sessions jouees en 2026
- Heures totales avec ta squad
- Ton meilleur streak
- Badges gagnes
- Score de fiabilite global
- Jeu le plus joue
- Membre le plus fiable de ta squad

### 5.3 Plan annuel push [Decembre] â€” MUST-HAVE

- Campagne "Nouvel an, nouvelle resolution gaming"
- -30% sur plan annuel Squad Leader
- Paiement en 3x sans frais via Stripe (Klarna/Afterpay si disponible en FR)
- Email + push + in-app banner

---

## PUBLICATION APP STORES â€” GUIDE COMPLET

### Etape 1 : Comptes developpeur [Semaine 11]

**Apple Developer Program :**
- URL : https://developer.apple.com/programs/
- Cout : 99 USD/an (~92 EUR)
- Inscription en tant qu'individu (pas besoin de societe pour commencer)
- Verification d'identite : ~24-48h
- Necessite un appareil Apple pour uploader (Mac ou service CI comme Codemagic)

**Google Play Developer :**
- URL : https://play.google.com/console
- Cout : 25 USD une seule fois (~23 EUR)
- Verification d'identite : ~48h
- Pas de materiel specifique requis

**Cout total : ~115 EUR**

### Etape 2 : Assets App Store [Semaine 12]

**Apple App Store â€” Assets requis :**

| Asset | Specification |
|-------|--------------|
| Icone | 1024x1024 PNG (sans transparence, sans coins arrondis) |
| Screenshots iPhone 6.7" | 1290x2796 ou 2796x1290 (paysage) â€” min 3, max 10 |
| Screenshots iPhone 6.5" | 1284x2778 ou 2778x1284 â€” min 3, max 10 |
| Screenshots iPad 12.9" | 2048x2732 (si app iPad) â€” optionnel |
| App Preview video | 15-30 secondes, H.264, max 500MB |
| Titre | Max 30 caracteres |
| Sous-titre | Max 30 caracteres |
| Description | Max 4000 caracteres |
| Mots-cles | Max 100 caracteres (separes par virgules) |
| URL politique confidentialite | Obligatoire |
| URL support | Obligatoire |

**Google Play Store â€” Assets requis :**

| Asset | Specification |
|-------|--------------|
| Icone | 512x512 PNG 32-bit |
| Feature graphic | 1024x500 PNG ou JPEG |
| Screenshots telephone | Min 2, max 8 â€” min 320px, max 3840px |
| Screenshots tablette 7" | Recommande si app tablette |
| Screenshots tablette 10" | Recommande si app tablette |
| Video promotionnelle | URL YouTube (optionnel) |
| Titre | Max 30 caracteres |
| Description courte | Max 80 caracteres |
| Description longue | Max 4000 caracteres |
| URL politique confidentialite | Obligatoire |

**ASO (App Store Optimization) :**

```
Titre FR : "Squad Planner - Sessions Gaming"
Titre EN : "Squad Planner - Gaming Sessions"

Sous-titre FR : "Planifie. Joue. Domine."
Sous-titre EN : "Plan. Play. Dominate."

Mots-cles Apple (100 chars) :
gaming,squad,session,planning,lfg,esport,team,valorant,fortnite,scheduler,gamer,voice,chat

Description FR (extrait) :
"Squad Planner est l'app #1 pour organiser tes sessions gaming avec ta squad.
Fini les messages WhatsApp qui se perdent et les 'je suis dispo peut-etre'.
Cree ta squad, planifie des sessions, confirme les presences et joue ensemble."

Categorie primaire : Social Networking
Categorie secondaire : Games (Utilities)
Classification age : 12+ (contenu genere par les utilisateurs, chat social)
```

### Etape 3 : Build & Configuration [Semaine 13]

**Pre-requis :**
```bash
# Synchroniser le web build avec les projets natifs
npm run build
npx cap sync
```

**Fichiers a modifier/creer :**

| Fichier | Modification |
|---------|-------------|
| `capacitor.config.ts` | Verifier `server.url` pointe vers production |
| `android/app/build.gradle` | Version code, version name, signing config |
| `ios/App/App/Info.plist` | CFBundleVersion, permissions descriptions |
| `ios/App/App/App.entitlements` | Associated Domains pour deep linking |

**Deep Linking :**

Fichier `public/.well-known/apple-app-site-association` :
```json
{
  "applinks": {
    "apps": [],
    "details": [{
      "appID": "TEAM_ID.fr.squadplanner.app",
      "paths": ["/join/*", "/s/*", "/squad/*", "/u/*"]
    }]
  }
}
```

Fichier `public/.well-known/assetlinks.json` :
```json
[{
  "relation": ["delegate_permission/common.handle_all_urls"],
  "target": {
    "namespace": "android_app",
    "package_name": "fr.squadplanner.app",
    "sha256_cert_fingerprints": ["SHA256_FINGERPRINT"]
  }
}]
```

**CI/CD Mobile (optionnel mais recommande) :**

Fichier `.github/workflows/mobile-build.yml` :
```yaml
name: Mobile Build
on:
  workflow_dispatch:
  push:
    tags: ['v*']
jobs:
  android:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - run: npm ci && npm run build && npx cap sync android
      - uses: nicovince/gradle-build-action@v2
        with:
          arguments: assembleRelease
          build-root-directory: android
```

**Alternative CI : Codemagic (gratuit 500 min/mois, build iOS sans Mac)**

### Etape 4 : In-App Purchase [Semaine 14]

**CRITIQUE : Apple et Google EXIGENT l'utilisation de leur systeme d'achat pour les abonnements in-app.**

**Plugin Capacitor :**
```bash
npm install @capacitor-community/in-app-purchases
npx cap sync
```

**Nouveau fichier : `src/hooks/useInAppPurchase.ts`**

Logique :
1. Detecter si l'app tourne en natif (Capacitor) ou web
2. Si natif â†’ utiliser IAP Apple/Google
3. Si web â†’ utiliser Stripe (existant)
4. Les deux mettent a jour le meme champ `subscription_tier` dans Supabase

**Produits IAP a creer :**

| Store | Product ID | Type | Prix |
|-------|-----------|------|------|
| Apple | `fr.squadplanner.premium.monthly` | Auto-renewable subscription | 6,99 EUR |
| Apple | `fr.squadplanner.premium.yearly` | Auto-renewable subscription | 59,88 EUR |
| Apple | `fr.squadplanner.squadleader.monthly` | Auto-renewable subscription | 14,99 EUR |
| Apple | `fr.squadplanner.squadleader.yearly` | Auto-renewable subscription | 143,88 EUR |
| Google | `premium_monthly` | Subscription | 6,99 EUR |
| Google | `premium_yearly` | Subscription | 59,88 EUR |
| Google | `squad_leader_monthly` | Subscription | 14,99 EUR |
| Google | `squad_leader_yearly` | Subscription | 143,88 EUR |

*Note : Le tier Club (B2B) reste web-only â€” pas de vente B2B via les stores.*

**Validation server-side des receipts :**

Nouvelle edge function : `supabase/functions/validate-iap-receipt/index.ts`
- Recoit le receipt de l'app
- Valide aupres d'Apple (App Store Server API) ou Google (Google Play Developer API)
- Met a jour `subscription_tier` dans profiles
- Stocke la transaction dans `subscriptions` table

**Commission :**
- Apple : 15% (Small Business Program, < 1M USD/an)
- Google : 15% (idem)
- Sur un abonnement Premium a 6,99 EUR : 1,05 EUR pour Apple/Google, 5,94 EUR net
- Sur un abonnement Squad Leader a 14,99 EUR : 2,25 EUR pour Apple/Google, 12,74 EUR net

### Etape 5 : Soumission [Semaine 15-16]

**iOS â€” TestFlight d'abord :**
1. Build l'archive Xcode (ou via Codemagic)
2. Upload sur App Store Connect
3. Distribuer via TestFlight (beta interne)
4. Tester 1-2 semaines avec beta testeurs
5. Soumettre pour App Review

**Causes de rejet courantes a prevenir :**

| Cause | Prevention |
|-------|-----------|
| Utilisation de Stripe au lieu d'IAP | Detecter la plateforme, utiliser IAP sur mobile |
| Politique de confidentialite manquante | URL `/legal` deja en place, verifier qu'elle est accessible |
| Description des permissions manquante | Info.plist : decrire micro, notifications, camera |
| Contenu genere par utilisateurs sans moderation | Ajouter signalement dans MessageActions (deja prevu) |
| Pas de fonctionnalite hors connexion | Service worker + OfflineBanner deja en place |
| Liens vers site externe pour achat | Ne JAMAIS rediriger vers Stripe depuis l'app mobile |

**Privacy Nutrition Labels Apple :**
- Donnees collectees : email, username, avatar (profile)
- Usage : fonctionnalite app, analytics
- Pas de tracking publicitaire
- Pas de partage avec des tiers

**Data Safety Google :**
- Meme informations que Apple
- Formulaire dans Google Play Console

**Timeline review :**
- Apple : 1-3 jours ouvrables (premiere soumission parfois 5-7 jours)
- Google : 1-7 jours (premiere soumission parfois 2 semaines)

### Etape 6 : Post-lancement stores

**Rating & Reviews :**
- Nouveau hook : `src/hooks/useAppStoreReview.ts`
- Prompt apres evenements positifs : session completee, level up, badge gagne
- Maximum 3 prompts par an (regle Apple)
- Repondre a TOUS les avis (positifs et negatifs) dans les 24h

**Cadence de mise a jour :**
- Toutes les 2-4 semaines, alignee sur les releases web
- Chaque update = opportunity de feature sur le store
- Release notes detaillees en francais + anglais

**Deep linking marketing :**
- Liens vers le store dans toutes les communications email
- Smart banner sur le site web mobile : "Telecharge l'app Squad Planner"
- QR codes dans les supports marketing

---

## LEGAL & COMPLIANCE

### RGPD (deja partiellement en place)

**Existant :**
- Cookie consent banner (`CookieConsent.tsx`)
- Page `/legal` avec mentions legales
- Consentement analytics respecte

**A ajouter :**

| Action | Fichier | Priorite |
|--------|---------|----------|
| Export de donnees utilisateur (DSAR) | `supabase/functions/export-user-data/index.ts` | MUST (avant stores) |
| Suppression de compte (droit a l'oubli) | `supabase/functions/delete-user-data/index.ts` | MUST (avant stores) |
| Bouton "Supprimer mon compte" dans Settings | `src/routes/settings.tsx` | MUST (exige par Apple) |
| Registre des traitements | Document interne | NICE-TO-HAVE |

**Edge function export :**
```typescript
// supabase/functions/export-user-data/index.ts
// Retourne un JSON avec : profile, squads, sessions, messages, rsvps, challenges, xp_transactions
// Doit etre livre sous 30 jours (RGPD)
```

**Edge function suppression :**
```typescript
// supabase/functions/delete-user-data/index.ts
// Supprime ou anonymise : profile, messages, rsvps, push_tokens, referrals
// Garde les sessions anonymisees pour les stats de squad
// Annule l'abonnement Stripe
// Revoque les tokens
```

### CGV / CGU / Mentions legales (France)

**Page `/legal` doit contenir :**

1. **Mentions legales** â€” Identite editeur, hebergeur (Vercel), contact
2. **CGU** â€” Conditions generales d'utilisation (acces, comportement, propriete intellectuelle)
3. **CGV** â€” Conditions generales de vente (abonnements, prix, facturation, remboursement)
4. **Politique de confidentialite** â€” Donnees collectees, finalites, duree, droits RGPD
5. **Politique de cookies** â€” Types de cookies, consentement, gestion
6. **Droit de retractation** â€” 14 jours pour les services numeriques en UE (peut etre renonce si service commence immediatement avec accord explicite)

### Classification age

- **App Store** : 12+ (contenu social, chat, UGC)
- **Google Play** : PEGI 12 / Everyone 10+
- **Raisons** : Chat social, contenu genere par utilisateurs, achat in-app

### Facturation B2B

Pour le tier Club, obligation de fournir des factures :
- Nouvelle edge function : `supabase/functions/generate-invoice/index.ts`
- Generer PDF avec : nom, SIRET, adresse, montant HT/TTC, TVA
- Stripe peut generer les factures automatiquement (activer dans le Dashboard)

---

## BUDGET & COUTS

### Couts fixes infrastructure

| Service | Gratuit jusqu'a | Prix Pro | Quand upgrader |
|---------|----------------|----------|---------------|
| Supabase | 500MB DB, 2GB bandwidth | 25 EUR/mois | ~5 000 users |
| Vercel | 100GB bandwidth | 20 EUR/mois | ~10 000 users |
| Railway (bot Discord) | 500h/mois | 5 EUR/mois | ~100 serveurs |
| Resend (emails) | 3 000 emails/mois | 0 EUR | Suffisant jusqu'a 3K users |
| PostHog | 1M events/mois | 0 EUR | Suffisant pour 2026 |
| Domain (squadplanner.fr) | â€” | ~12 EUR/an | Annuel |

**Projection mensuelle :**

| Mois | Users | Supabase | Vercel | Railway | Email | Total infra |
|------|-------|----------|--------|---------|-------|-------------|
| Mars-Mai | < 2K | 0 | 0 | 0 | 0 | **0 EUR** |
| Juin-Aout | 2K-7K | 25 | 0 | 5 | 0 | **30 EUR** |
| Sept-Oct | 7K-12K | 25 | 20 | 5 | 0 | **50 EUR** |
| Nov-Dec | 12K-18K | 25 | 20 | 5 | 20 | **70 EUR** |

### Couts ponctuels

| Item | Cout | Quand |
|------|------|-------|
| Apple Developer Program | 92 EUR/an | Mai |
| Google Play Developer | 23 EUR (une fois) | Mai |
| Screenshots app (Canva Pro 1 mois) | 13 EUR | Mai |
| **Total ponctuel** | **~128 EUR** | |

### Budget marketing : 30% du MRR reinvesti

| Mois | MRR | 30% Budget marketing | Canal recommande |
|------|-----|---------------------|-----------------|
| Mars-Avril | 180-465 | 0 EUR (MRR trop bas) | Organique pur |
| Mai | 1 055 | 0 EUR | Organique (lancement stores) |
| Juin | 1 969 | ~600 EUR | Reddit ads + micro-streamers |
| Juil | 2 928 | ~880 EUR | Google Ads (branded keywords) |
| Aout | 3 907 | ~1 170 EUR | Multi-canal |
| Sept | 5 061 | ~1 500 EUR | + Apple Search Ads |
| Oct | 6 367 | ~1 900 EUR | Scale up |
| Nov | 8 163 | ~2 450 EUR | Black Friday push |
| Dec | 10 158 | ~3 050 EUR | Wrapped + annual push |
| **Total marketing 2026** | | **~11 550 EUR** | |

### Bilan previsionnel

| | Revenus | Couts infra | Couts stores | Marketing | **Benefice brut** |
|---|---------|------------|-------------|-----------|-----------------|
| **Total 2026** | ~50 250 EUR | ~540 EUR | ~128 EUR | ~11 550 EUR | **~38 030 EUR** |

*Note : 50 000 EUR = objectif de chiffre d'affaires brut, pas de benefice net. Le benefice net apres couts est ~38K EUR. Si l'objectif est 50K de benefice net, il faudrait ~62K de CA brut â€” ce qui necessiterait une croissance 25% plus rapide ou un budget marketing reduit.*

---

## DETTES TECHNIQUES BLOQUANTES

**A corriger AVANT tout nouveau developpement (Phase 1, Semaine 1) :**

| # | Probleme | Fichier | Impact | Complexite |
|---|---------|---------|--------|-----------|
| 1 | `is_user_premium()` retourne boolean | `supabase/migrations/20260206170001_premium_backend_security.sql` | Bloque 4 tiers | Moyenne |
| 2 | `stripe-webhook` hardcode `'premium'` (ligne 103) | `supabase/functions/stripe-webhook/index.ts` | Bloque 4 tiers | Faible |
| 3 | `subscriptions.squad_id` NOT NULL | `supabase/migrations/20260204000001_initial_schema.sql` | Bloque abo personnel | Faible |
| 4 | Pas de rate limiting sessions Free | Aucun trigger existant | Bloque reduction Free | Moyenne |
| 5 | Sitemap statique 6 URLs | `public/sitemap.xml` | Bloque SEO | Faible |
| 6 | Pas de mecanisme desinscription email | Aucune table email_preferences | Bloque lifecycle emails | Moyenne |
| 7 | `PricingSection.tsx` hardcode 4.99 | `src/components/landing/PricingSection.tsx` | Incoherence prix | Faible |
| 8 | `FREE_SQUAD_LIMIT = 2` hardcode | `src/hooks/usePremium.ts` (ligne 5) | Bloque reduction Free | Faible |

**Ordre de resolution recommande :** 1 â†’ 3 â†’ 2 â†’ 8 â†’ 4 â†’ 7 â†’ 5 â†’ 6

---

## EQUIPE & RECRUTEMENT

### Ce qu'un solo dev + IA peut faire

| Domaine | Faisable solo + IA ? | Commentaire |
|---------|---------------------|------------|
| Code frontend/backend | Oui | Claude Code = multiplicateur 5-10x |
| Design UI/UX | Oui | Tailwind + composants existants |
| Bot Discord | Oui | discord.js bien documente |
| App store submission | Oui | Process bien defini, une fois |
| Migrations DB | Oui | Supabase CLI |
| SEO technique | Oui | Meta tags, JSON-LD, sitemap |
| Email templates | Oui | Resend + HTML |

### Ce qui necessite de l'aide humaine

| Domaine | Pourquoi | Solution |
|---------|----------|---------|
| Content marketing (2 articles/sem + social) | Volume + creativite + regularity | Freelance content creator |
| B2B sales outreach | Relations humaines, persistence | Freelance sales ou soi-meme |
| Community management | Presence continue, moderation | Community manager freelance |
| Support client (>500 users) | Volume de tickets | Support freelance |
| Videos TikTok/Instagram | Production video | Creator/ambassadeur |

### Jalons de recrutement

| Jalon MRR | Action | Budget | Type |
|-----------|--------|--------|------|
| 500 EUR/mois (~mai) | Community manager gaming FR | 400-600 EUR/mois | Freelance 10h/sem |
| 2 000 EUR/mois (~juin) | Content creator (blog + social) | 600-800 EUR/mois | Freelance 15h/sem |
| 3 000 EUR/mois (~juil) | OU faire les deux soi-meme | 0 EUR | Prioriser |
| 5 000 EUR/mois (~sept) | Support client temps partiel | 400 EUR/mois | Freelance 8h/sem |
| 8 000 EUR/mois (~nov) | Evaluer besoin second dev | 0-2000 EUR | Si necessaire |

### Alternative : Revenue sharing / Ambassadeurs

- **Community manager benevole** : offrir Squad Leader gratuit + titre "Community Manager officiel" + visibilite
- **Content creator** : 10% de commission sur chaque abonne referral
- **Ambassadeurs streamers** : Squad Leader gratuit + 20% commission
- **Clubs esport universitaires** : Club gratuit en echange de promotion

---

## PLANS DE CONTINGENCE

### Scenario A : Croissance a 50% des projections

**Declencheur :** MRR < 1 000 EUR en juin (vs 1 969 EUR projete)

**Actions immediates :**
1. **Couper** tout marketing payant
2. **Doubler** les efforts sur le bot Discord (canal gratuit, viralite)
3. **Reduire** le scope : abandonner Club tier, focus Premium + Squad Leader
4. **Aggresser** les limites Free : 1 squad, 3 jours historique, 2 sessions/semaine
5. **Reporter** : expansion internationale, blog, Gaming Wrapped
6. **Nouvel objectif** : 25 000 EUR fin 2026

**Must-keep meme a 50% :**
- Bot Discord (viral, gratuit)
- Referral system (zero-cost acquisition)
- App Stores (nouveau canal d'acquisition)
- Lifecycle emails (retention quasi-gratuite)

**Couper :**
- Blog/content marketing
- Expansion ES/DE
- Programme ambassadeur
- Dashboard B2B Club
- Widget embarquable

### Scenario B : Croissance a 150%+ des projections

**Declencheur :** MRR > 3 000 EUR en juin (vs 1 969 EUR projete)

**Actions :**
1. **Investir** 1 000+ EUR/mois en acquisition payante
2. **Recruter** community manager + content creator immediatement
3. **Accelerer** expansion internationale a Q2 (au lieu de Q4)
4. **Lancer** Club tier plus tot
5. **Considerer** pre-seed funding (5-20K EUR) pour accelerer encore
6. **Nouvel objectif** : 75 000-100 000 EUR fin 2026

### Scenario C : Blocage technique

**Rejet App Store :**
- Soumettre TestFlight des avril pour feedback precoce
- Avoir la politique de confidentialite et IAP prets avant soumission
- Utiliser RevenueCat comme middleware IAP (reduit les rejets)
- Pre-review disponible pour les premiers developpeurs (contacter Apple)

**Scaling Supabase :**
- Free tier : 500MB DB, 2GB bandwidth
- Upgrade Pro a 25 EUR/mois quand on approche des limites (~5 000 users)
- Si DB > 1GB : nettoyer les `web_vitals` et `error_reports` (TTL 90 jours)
- Si realtime saturee : reduire les subscriptions non-critiques

**Burnout solo dev :**
- Prioriser RUTHLESSLY : ne faire que les items MUST-HAVE
- Automatiser tot (CI/CD, emails, cron jobs)
- Prendre 1 jour off par semaine minimum
- Si >60h/semaine pendant 3 semaines : recruter immediatement

### Kill Switch Protocol

**Chaque mois, verifier ces seuils :**

| Metrique | Seuil alerte | Action |
|----------|-------------|--------|
| Revenue cumule < 30% projection | Alerte rouge | Pivoter strategie, reduire scope |
| MRR en baisse 2 mois consecutifs | Alerte rouge | Pause acquisition, fix retention |
| Churn > 15% | Alerte orange | Pause toute acquisition, focus retention |
| Cout acquisition > LTV | Alerte orange | Couper le marketing payant |
| App store rating < 3.5 | Alerte orange | Sprint bugfix, repondre avis |
| 0 nouveaux users/semaine | Alerte rouge | Changer de canal d'acquisition |

---

## CALENDRIER SYNTHETIQUE

| Semaine | Dates | Actions prioritaires | Type |
|---------|-------|---------------------|------|
| **S1** | 16-22 fev | Corriger dettes techniques #1-4 + creer produits Stripe | MUST |
| **S2** | 23 fev-1 mar | Redesign page Premium 4 colonnes + reduire limites Free | MUST |
| **S3** | 2-8 mar | Systeme de parrainage (DB + hooks + UI) | MUST |
| **S4** | 9-15 mar | Partage social (ShareButtons, route /s/:id) | NICE |
| **S5** | 16-22 mar | Bot Discord MVP â€” structure + commandes free | MUST |
| **S6** | 23-29 mar | Bot Discord â€” commandes premium + Stripe bot | MUST |
| **S7** | 30 mar-5 avr | Publication bot (top.gg) + campagne Guilded | MUST |
| **S8** | 6-12 avr | Pages SEO /games/[jeu] + sitemap dynamique | MUST |
| **S9** | 13-19 avr | Pages /alternative/ + /vs/ + /lfg/[jeu] | MUST |
| **S10** | 20-26 avr | Viralite : invite onboarding + widget embarquable | NICE |
| **S11** | 27 avr-3 mai | Comptes dev Apple + Google + preparation | MUST |
| **S12** | 4-10 mai | Assets stores (screenshots, descriptions, ASO) | MUST |
| **S13** | 11-17 mai | Build config + signing + sessions recurrentes | MUST |
| **S14** | 18-24 mai | In-App Purchase implementation + deep linking | MUST |
| **S15** | 25-31 mai | TestFlight iOS + Internal Testing Android | MUST |
| **S16** | 1-7 jun | Soumission stores + corrections rejets eventuels | MUST |
| **S17** | 8-14 jun | Dashboard Squad Leader (debut) + RGPD compliance | MUST |
| **S18** | 15-21 jun | Dashboard Squad Leader (fin) + analytics equipe | MUST |
| **S19-20** | 22 jun-5 jul | Outreach B2B esport (emails, demos, trials) | MUST |
| **S21-22** | 6-19 jul | Programme ambassadeur + blog infrastructure | NICE |
| **S23-24** | 20 jul-2 aout | Bot Discord v2 + optimisations performance | MUST |
| **S25-26** | 3-16 aout | A/B tests conversion + paywall soft | MUST |
| **S27-28** | 17-30 aout | Emails lifecycle (8 templates + cron) | MUST |
| **S29-30** | 1-14 sept | Dashboard B2B Club | MUST |
| **S31-32** | 15-28 sept | Expansion i18n (ES, DE) | NICE |
| **S33-34** | 29 sept-12 oct | LFG matchmaking ameliore | NICE |
| **S35-36** | 13-26 oct | Scale acquisition + optimisation churn | MUST |
| **S37-38** | 27 oct-9 nov | Preparation Black Friday | MUST |
| **S39-40** | 10-23 nov | **BLACK FRIDAY** execution + push | MUST |
| **S41-42** | 24 nov-7 dec | Gaming Wrapped 2026 (Remotion) | MUST |
| **S43-44** | 8-31 dec | Push plans annuels + bilan annuel | MUST |

---

## KPIs A SUIVRE CHAQUE SEMAINE

| KPI | Objectif Mars | Objectif Juin | Objectif Sept | Objectif Dec |
|-----|---------------|---------------|---------------|--------------|
| Users inscrits | 600 | 3 500 | 9 500 | 18 000 |
| Users actifs/mois (MAU) | 300 | 2 000 | 5 000 | 10 000 |
| Abonnes payants (web) | 20 | 156 | 422 | 874 |
| Abonnes payants (mobile) | 0 | 20 | 80 | 180 |
| MRR total | 180 EUR | 1 969 EUR | 5 061 EUR | 10 158 EUR |
| Revenu cumule | 180 EUR | 3 669 EUR | 15 565 EUR | ~50 000 EUR |
| Churn mensuel | < 10% | < 8% | < 6% | < 5% |
| ARPU | 9 EUR | 10 EUR | 10 EUR | 10 EUR |
| Referrals/mois | 10 | 100 | 300 | 600 |
| Serveurs Discord bot | 0 | 80 | 200 | 400 |
| Note App Store | â€” | 4.5+ | 4.5+ | 4.5+ |
| Telechargements stores/mois | 0 | 500 | 1 500 | 3 000 |
| Bot Discord users | 0 | 2 000 | 5 000 | 10 000 |
| Taux conversion freeâ†’paid | 3% | 4% | 5% | 5% |
| NPS | â€” | 40+ | 50+ | 60+ |

---

## OUTILS & STACK NECESSAIRES

| Outil | Usage | Cout mensuel | Quand |
|-------|-------|-------------|-------|
| Stripe | Paiements web + bot | 2,9% + 0,25 EUR/tx | Deja en place |
| Apple IAP | Paiements iOS | 15% commission | Juin |
| Google IAP | Paiements Android | 15% commission | Juin |
| PostHog | Analytics + A/B tests | Gratuit < 1M events | Deja en place |
| Supabase | Backend (DB, Auth, Edge Functions, Realtime) | Gratuit puis 25 EUR/mois | Deja en place |
| Vercel | Hosting SSR + CDN | Gratuit puis 20 EUR/mois | Deja en place |
| Railway | Bot Discord hosting | Gratuit puis 5 EUR/mois | Mars |
| Resend | Emails transactionnels | Gratuit < 3K/mois | Deja en place |
| Apple Developer | Publication iOS | 92 EUR/an | Mai |
| Google Play Developer | Publication Android | 23 EUR (une fois) | Mai |
| top.gg | Distribution bot Discord | Gratuit | Mars |
| Canva | Visuels marketing + screenshots | Gratuit (Pro 13 EUR/mois si besoin) | Mai |
| Buffer/Typefully | Programmation posts reseaux sociaux | ~10 EUR/mois | Juin |
| Codemagic (optionnel) | CI/CD mobile sans Mac | Gratuit 500 min/mois | Mai |
| **Total mensuel (debut)** | | **~0-5 EUR** | |
| **Total mensuel (Q3-Q4)** | | **~80-120 EUR** | |

---

## RISQUES ET MITIGATIONS

| # | Risque | Impact | Probabilite | Mitigation |
|---|--------|--------|-------------|------------|
| 1 | Acquisition trop lente | Objectif non atteint | Moyen | Tripler les canaux : bot Discord + SEO + App Stores + ambassadeurs |
| 2 | Churn eleve (>10%) | Revenue instable | Moyen | Gamification, streaks, emails lifecycle, challenges hebdo |
| 3 | Rejet App Store | Retard publication | Moyen | TestFlight tot, IAP correct, privacy policy, suppression compte |
| 4 | Concurrence (GamerLink v5, nouveau concurrent) | Parts de marche | Faible | Differenciation : IA + francophone + UX superieure + bot Discord |
| 5 | Stripe/IAP fees trop eleves | Marge reduite | Faible | Plans annuels (1 tx/12), prix web vs mobile identiques |
| 6 | Burnout (1 personne) | Arret du projet | Moyen | Prioriser MUST-HAVE only, recruter a 500 EUR MRR, jour off hebdo |
| 7 | Bug critique en production | Perte d'utilisateurs | Faible | 436 unit tests + 192 E2E + error tracking + CI/CD robuste |
| 8 | Supabase scaling | Service degrade | Faible | Upgrade Pro a 5K users, optimiser requetes, TTL sur logs |
| 9 | Changement regles Apple/Google | Impact monetisation | Faible | Garder web comme canal principal, stores = bonus |
| 10 | Pas de product-market fit | Echec total | Faible-Moyen | Valider avec 100 users actifs avant d'investir, pivoter si NPS < 20 |

---

## PROCHAINE ACTION IMMEDIATE

### Aujourd'hui (16 fevrier 2026)

1. **Creer les nouveaux produits/prix dans Stripe Dashboard**
   - Premium : 6,99 EUR/mois + 59,88 EUR/an
   - Squad Leader : 14,99 EUR/mois + 143,88 EUR/an
   - Club : 39,99 EUR/mois + 383,88 EUR/an
   - Activer les codes promo

2. **Corriger les dettes techniques bloquantes**
   - Migration DB : `ALTER TYPE subscription_tier ADD VALUE 'squad_leader'/'club'`
   - Refactorer `is_user_premium()` â†’ `get_user_tier()`
   - Rendre `subscriptions.squad_id` nullable
   - Ajouter trigger rate limiting sessions Free

3. **Commencer la restructuration du code pricing**
   - `src/hooks/usePremium.ts` â†’ 4 tiers
   - `supabase/functions/stripe-webhook/index.ts` â†’ mapper price_id â†’ tier

### Cette semaine (S1 : 16-22 fev)

- [ ] Produits Stripe crees (6 prix)
- [ ] Migration DB deployee (enum + functions + trigger)
- [ ] `usePremium.ts` refactorise (4 tiers)
- [ ] `useSubscription.ts` mis a jour (8 plans)
- [ ] `stripe-webhook` corrige (mapping dynamique)
- [ ] Free tier reduit (1 squad, 7j, 3 sessions/sem)
- [ ] Tests passes (unit + E2E)

### Semaine prochaine (S2 : 23 fev - 1 mar)

- [ ] Page Premium 4 colonnes deployee
- [ ] Toggle mensuel/annuel fonctionnel
- [ ] Landing PricingSection mise a jour
- [ ] Banniere "-30% lancement" avec countdown

---

## REGLES OBLIGATOIRES POUR TOUS LES AGENTS

### Tests obligatoires a chaque implementation

**REGLE ABSOLUE : Chaque agent DOIT creer des vrais tests (unitaires + E2E) pour TOUTE nouvelle fonctionnalite implementee.**

**Tests unitaires (Vitest) :**
- Tester les fonctions pures SANS aucun mock (constantes, calculs, logique metier)
- Tester les stores Zustand avec `setState()` pour verifier la vraie logique
- Tester les composants avec un vrai `render()` (React Testing Library)
- Tester l'integrite des donnees exportees (arrays, configs, prix)
- Les mocks de Supabase sont acceptes UNIQUEMENT pour les appels reseau â€” la logique testee doit etre REELLE
- Pas de `expect(true).toBe(true)` â€” chaque assertion doit verifier une valeur metier

**Tests E2E (Playwright) :**
- Naviguer sur les vraies pages deployees (squadplanner.fr)
- Verifier que le contenu s'affiche reellement (prix, noms de tier, features)
- Utiliser les fixtures existantes (`authenticatedPage`, `db`, `dismissCookieBanner`)
- Tester les flux utilisateur complets (navigation, clics, formulaires)
- Pas de `.catch(() => false)` sur les assertions â€” le test DOIT echouer si le contenu manque

**Interdictions :**
- PAS de tests "fake" qui passent toujours
- PAS de mocks complets qui remplacent toute la logique
- PAS de tests qui verifient uniquement que "le composant ne crash pas"
- PAS de skip de tests sans justification

**Ou placer les tests :**
- Unitaires : `src/**/__tests__/*.test.{ts,tsx}` (a cote du fichier teste)
- E2E : `e2e/*.spec.ts`
- Commande : `npm run test:unit` (unitaires), `npx playwright test` (E2E)

---

*Ce plan est mis a jour chaque dimanche avec les metriques reelles.*
*Chaque phase a un "kill switch" : si les metriques sont a < 50% de l'objectif, on pivote la strategie.*
*Review trimestrielle : 1er avril, 1er juillet, 1er octobre pour ajuster les projections.*
